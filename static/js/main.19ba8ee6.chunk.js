(this["webpackJsonpshuffle-list-client"]=this["webpackJsonpshuffle-list-client"]||[]).push([[0],{67:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),s=n.n(c),i=(n(66),n(67),n(8)),o=n(7),u=n.n(o),l=n(11),j=n(15),b=n(32),p=n.n(b),d=function(){var e=p.a.create({baseURL:"https://shuffle-list-server.herokuapp.com/",withCredentials:!1});return{getLists:function(){var t=Object(l.a)(u.a.mark((function t(){var n,r,a=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]&&a[0],t.prev=1,t.next=4,e.get("",{cancelToken:n.token});case 4:if(200!==(r=t.sent).status){t.next=7;break}return t.abrupt("return",r.data);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),addListItem:function(){var t=Object(l.a)(u.a.mark((function t(n,r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.post("lists/".concat(n,"/items/"),r);case 3:return a=t.sent,t.abrupt("return",a.data);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),removeListItem:function(){var t=Object(l.a)(u.a.mark((function t(n,r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.delete("lists/".concat(n,"/items/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.status);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),deleteList:function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.delete("lists/".concat(n,"/"));case 3:return r=t.sent,t.abrupt("return",r.data);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),createList:function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.post("lists/",n);case 3:return r=t.sent,t.abrupt("return",r.data);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),login:function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.post("login/",n);case 3:return r=t.sent,t.abrupt("return",r.data);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},h=n(97),x=n(98),f=n(58),O=n(105),v=n(103),m=n(99),g=n(104),k=function(e){return void 0===e||null===e||!e},w=n(2),y=function(){var e=Object(i.g)(),t=a.a.useState(""),n=Object(j.a)(t,2),r=n[0],c=n[1],s=a.a.useState(""),o=Object(j.a)(s,2),b=o[0],p=o[1],y=a.a.useState(!1),C=Object(j.a)(y,2),L=C[0],S=C[1],N=a.a.useState(!1),I=Object(j.a)(N,2),T=I[0],B=I[1],E=a.a.useState(""),F=Object(j.a)(E,2),A=F[0],D=F[1],G=function(){var t=Object(l.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),S(!0),t.prev=2,t.next=5,d().login({user:r,password:b});case 5:if(a=t.sent,k(a.token)){t.next=11;break}sessionStorage.setItem("token",a.token),e.push("/home"),t.next=12;break;case 11:throw new Error("User not found");case 12:t.next=20;break;case 14:t.prev=14,t.t0=t.catch(2),"An error occurred, please try again",D("An error occurred, please try again"),B(!0),S(!1);case 20:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(w.jsx)(h.a,{children:Object(w.jsxs)(x.a,{className:"mt-5",children:[Object(w.jsx)(f.a,{}),Object(w.jsxs)(f.a,{xs:10,md:6,children:[Object(w.jsx)("h1",{id:"login-title",className:"text-center mb-3",children:"Shuffle List"}),Object(w.jsx)(O.a,{className:"mb-5",children:Object(w.jsxs)(O.a.Body,{children:[Object(w.jsxs)(v.a,{onSubmit:G,children:[Object(w.jsxs)(v.a.Group,{controlId:"user",children:[Object(w.jsx)(v.a.Label,{children:"user"}),Object(w.jsx)(v.a.Control,{required:!0,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Enter user"})]}),Object(w.jsxs)(v.a.Group,{controlId:"password",children:[Object(w.jsx)(v.a.Label,{children:"Password"}),Object(w.jsx)(v.a.Control,{required:!0,onChange:function(e){return p(e.target.value)},type:"password",placeholder:"Enter password"})]}),Object(w.jsx)(m.a,{disabled:!(r.length>0&&b.length>0),className:"mx-auto d-block large",variant:"primary",type:"submit",children:L?"Loading...":"Login"})]}),T?Object(w.jsx)(g.a,{variant:"danger",className:"mt-5",dismissible:!0,onClose:function(){return B(!1)},children:A}):""]})})]}),Object(w.jsx)(f.a,{})]})})},C=n(22),L=n(61),S=n(19),N=n(102),I=n(100),T=n(101),B=n(27),E=function(e){var t=d(),n=e.handleDelete,r=e.model,c=r.title,s=r.items,i=r.id,o=a.a.useState(s),b=Object(j.a)(o,2),p=b[0],h=b[1],x=a.a.useState(!1),f=Object(j.a)(x,2),g=f[0],k=f[1],y=a.a.useState({title:"",url:""}),C=Object(j.a)(y,2),L=C[0],E=C[1],F=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,t.addListItem(i,L);case 4:n=e.sent,h(n),k(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.removeListItem(i,n);case 3:200===e.sent&&(r=p.filter((function(e,t){return t!==n})),h(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(O.a,{children:[Object(w.jsxs)(N.a,{show:g,onHide:function(){k(!1)},children:[Object(w.jsx)(N.a.Header,{closeButton:!0,children:Object(w.jsx)(N.a.Title,{children:"Add Element"})}),Object(w.jsxs)(N.a.Body,{children:[Object(w.jsxs)(v.a.Group,{controlId:"title",children:[Object(w.jsx)(v.a.Label,{children:"Title"}),Object(w.jsx)(v.a.Control,{onChange:function(e){return E(Object(S.a)(Object(S.a)({},L),{},{title:e.target.value}))},type:"text"})]}),Object(w.jsxs)(v.a.Group,{controlId:"url",children:[Object(w.jsx)(v.a.Label,{children:"Url"}),Object(w.jsx)(v.a.Control,{onChange:function(e){return E(Object(S.a)(Object(S.a)({},L),{},{url:e.target.value}))},type:"text"})]})]}),Object(w.jsxs)(N.a.Footer,{children:[Object(w.jsx)(m.a,{variant:"secondary",onClick:function(){k(!1)},children:"Close"}),Object(w.jsx)(m.a,{variant:"primary",onClick:F,children:"Save Changes"})]})]}),Object(w.jsx)(O.a.Title,{className:"pt-3 pl-3 pb-0",children:c}),Object(w.jsx)(O.a.Body,{children:p.map((function(e,t){return e.url?Object(w.jsx)("a",{rel:"noreferrer",target:"_blank",href:e.url,children:Object(w.jsxs)(I.a,{className:"px-2 py-2 my-1 mx-1",variant:"dark",children:[e.title,"\xa0",Object(w.jsx)(B.a,{cursor:"pointer",onClick:function(){A(t)},className:"ml-2 mr-1",size:"xs",icon:["fas","trash"]})]})},t):Object(w.jsxs)(I.a,{className:"px-2 py-2 my-1 mx-1 text-break",variant:"dark",children:[e.title,"\xa0",Object(w.jsx)(B.a,{cursor:"pointer",onClick:function(){A(t)},className:"ml-2 mr-1",size:"xs",icon:["fas","trash"]})]},t)}))}),Object(w.jsx)(O.a.Footer,{children:Object(w.jsxs)(T.a,{children:[Object(w.jsx)(m.a,{onClick:function(){k(!0)},variant:"primary",children:Object(w.jsx)(B.a,{icon:["fas","plus"]})}),Object(w.jsx)(m.a,{variant:"success",children:Object(w.jsx)(B.a,{icon:["fas","random"]})}),Object(w.jsx)(m.a,{variant:"danger",onClick:function(){n(i)},children:Object(w.jsx)(B.a,{icon:["fas","trash"]})})]})})]})},F=function(){var e=Object(i.g)(),t=a.a.useState([]),n=Object(j.a)(t,2),r=n[0],c=n[1],s=d(),o=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.deleteList(t);case 3:void 0!==(n=e.sent)&&n&&c(r.filter((function(e){return e.id!==t}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=prompt("\xbfCual es el titulo de la lista?"),e.prev=1,!t){e.next=7;break}return e.next=5,s.createList({title:t});case 5:(n=e.sent)&&c([].concat(Object(L.a)(r),[{id:n,title:t,items:[]}]));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){var e=p.a.CancelToken.source();return function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d().getLists(e);case 2:n=t.sent,n=Array.isArray(n)?n:[],c(n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e.cancel()}}),[]),Object(w.jsx)(h.a,{className:"mt-4 mb-5",children:Object(w.jsxs)(x.a,{children:[Object(w.jsxs)(f.a,{xs:12,md:2,children:[Object(w.jsx)(m.a,{onClick:b,className:"mt-3",variant:"success",children:"Nueva lista"}),Object(w.jsx)("br",{}),Object(w.jsx)(m.a,{onClick:function(){sessionStorage.removeItem("token"),e.push("/login")},className:"mt-3",variant:"danger",children:"Salir"})]}),Object(w.jsx)(f.a,{xs:12,md:10,children:Object(w.jsxs)(x.a,{children:[r.map((function(e){return Object(w.jsx)(f.a,{className:"mb-3 mt-3",xs:12,md:12,sm:12,children:Object(w.jsx)(E,{handleDelete:o,model:e})},e.id)})),r.length>0?"":Object(w.jsx)(g.a,{className:"center mx-auto",variant:"danger",children:"No se han encontrado listas para mostrar"})]})})]})})},A=n(36),D=function(e){var t=e.children,n=Object(A.a)(e,["children"]),r=sessionStorage.getItem("token");return Object(w.jsx)(i.b,Object(S.a)(Object(S.a)({},n),{},{children:k(r)?t:Object(w.jsx)(i.a,{to:"/home"})}))},G=function(e){var t=e.children,n=Object(A.a)(e,["children"]),r=sessionStorage.getItem("token");return Object(w.jsx)(i.b,Object(S.a)(Object(S.a)({},n),{},{children:!k(r)&&r?t:Object(w.jsx)(i.a,{to:"/login"})}))},P=(n(94),function(){return Object(w.jsx)(C.a,{children:Object(w.jsxs)(i.d,{children:[Object(w.jsx)(D,{exact:!0,path:["/","/login/"],children:Object(w.jsx)(y,{})}),Object(w.jsx)(G,{exact:!0,path:"/home",children:Object(w.jsx)(F,{})})]})})}),U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},q=n(24),z=n(60);q.b.add(z.a),s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(P,{})}),document.getElementById("root")),U()}},[[95,1,2]]]);
//# sourceMappingURL=main.19ba8ee6.chunk.js.map